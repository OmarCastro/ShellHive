<div class="navbar navbar-fixed-top navbar-default navbar-inverse" role="navigation">
<div class="container-fluid">

  <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
    </div>

  <div class="collapse navbar-collapse">
    <ul class="nav navbar-nav">
      <li class="dropdown" ng-controller="macroCtrl">
      <a href="#" data-toggle="dropdown" class="dropdown-toggle" is-open="status.macroDropdown">
      Macro <b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li><a mousetrap="Shift+M" ng-click="newMacroModal()">New Macro</a></li>
          <li class="divider"></li>
          <li class="dropdown-header">created Macros</li>
          <li ng-repeat="macro in graphModel.macroList"><a ng-bind="macro" ng-click="; status.macroDropdown = false; macroEditModal(macro)"></a></li>
        </ul>
      </li>
      <li class="dropdown" is-open="status.isopen">
      <a href="#" data-toggle="dropdown" class="dropdown-toggle">
        Add Command 
        <b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li ng-repeat="command in implementedCommands">
          <a ng-click="newCommandAtTopLeft(command); status.isopen=false;" ng-bind="command"></a>
          </li>
        </ul>
      </li>



      <li class="dropdown" is-open="status.isopen2">
        <a href="#" data-toggle="dropdown" class="dropdown-toggle">View<b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li><a mousetrap="Shift+S" ng-click="$parent.filesystem = false; $parent.shell = !shell; $parent.shell && $emit('compileGraph'); status.isopen2=false">Toogle Terminal View</a></li>
          <li><a mousetrap="Shift+R" ng-click="$parent.filesystem = false; viewGraph(rootGraph); status.isopen2=false;">View Root Graph</a></li>
          <li><a mousetrap="Shift+F" ng-click="$parent.filesystem = true; status.isopen2=false;">View FileSystem</a></li>
        </ul>
      </li>

      <li class="dropdown" is-open="status.isopen3">
        <a href="#" data-toggle="dropdown" class="dropdown-toggle">Action<b class="caret"></b></a>
        <ul class="dropdown-menu">
          <li><a mousetrap="Ctrl+Shift+up" ng-click="$parent.filesystem = false; collapseAll(); status.isopen3=false">Collapse all components</a></li>
          <li><a mousetrap="Ctrl+Shift+down" ng-click="$parent.filesystem = false; uncollapseAll(); status.isopen3=false;">Uncollapse all components</a></li>
        </ul>
      </li>


      <li><a ng-click="shell = true; $emit('runCommand', [])">
        <span class="glyphicon glyphicon-play">&nbsp;</span><span>Run</span>
      </a></li>
    </ul>
    <ul class="nav navbar-nav navbar-right">
      <li><a href="http://bit.ly/shellhive-feedback" target="_blank">Docs</a></li>
      <li><a href="http://omarcastro.github.io/ShellHive/docs/" target="_blank">Docs</a></li>
      <li>
        <a ng-click="chat.open = !chat.open">
          <span class="glyphicon glyphicon-user"></span> 
          <span class="badge" ng-if="clients.length > 1" ng-bind="clients.length - 1"></span>
        </a>
      </li>

      
      <% if(req.session.user){ %>
        <li>
          <a href="/user/show/<%= req.session.user.id %>">
            <%= req.session.user.name %>
          </a>
        </li>
        <li><a class="glyphicon glyphicon-user user-icon"></a></li>
        <li><a href="/logout">Logout</a></li>

      <% } else { %>
        <li><a> Anonymous Visitor </a></li>
        <li><a class="glyphicon glyphicon-user user-icon"></a></li>

      <% } %>
    

    </ul>
  </div>
</div>
</div>